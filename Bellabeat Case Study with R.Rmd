---
title: "Bellabeat Case Study using R"
author: "Braeden Davidson"
output: html_document
date: "2023-02-04"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# About the company
Bellabeat, a high-tech manufacturer of health-focused products for women. Bellabeat is a successful small company, but they have the potential to become a larger player in the global smart device market. Urška Sršen, cofounder and Chief Creative Officer of Bellabeat, believes that analyzing smart device fitness data could help unlock new growth opportunities for the company.

# Questions to Guide Analysis
1. What are some trends in smart device usage?
2. How could these trends apply to Bellabeat customers?
3. How could these trends help influence Bellabeat marketing strategy?

# Business task
Identify potential opportunities for growth and recommendations for the Bellabeat marketing strategy improvement based on trends in smart device usage.

# Data sources
The Data is public data from FitBit Fitness Tracker Data (CC0: Public Domain, dataset made available through Mobius): This Kaggle data set contains personal fitness tracker from thirty fitbit users. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. It includes information about daily activity, steps, and heart rate that can be used to explore users’ habits. These datasets were generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. The dataset has in total 18 files in .csv format organized in long format.
 
## Is Data ROCCC?
* Reliable — LOW — This data is not reliable, there are only 30 respondents.
* Original — LOW — Third party provider (Amazon Mechanical Turk).
* Comprehensive — MED — Parameters match most of Bellabeat products’ parameters.
* Current — LOW — Data was collected in 2016, it is outdated and may not represent the current trends in smart device usage.
* Cited — LOW — Data collected from third party, hence unknown.

The data integrity and credibility is clearly insufficient to provide reliable and comprehensive insights to Bellabeat. Therefore, the following analysis can only provide first hints and directions which should be verified through an analysis of a larger and much more reliable dataset.

# Tools Used
For this analysis, I have chosen to use R due to the usability of the R markdown document, on RStudio/Posit Cloud.

# Loading packages
I will start by installing "Janitor" and all the "Tidyverse" R packages.
```{r}
install.packages('tidyverse')
install.packages("janitor")
```

Then I will load the required R packages for my analysis using the library(package) command.
```{r}
library(tidyverse)
library(lubridate)
library(dplyr)
library(ggplot2)
library(tidyr)
library(janitor)
```

# Importing the datasets
For my analysis i’ll be using these three datasets:
*dailyActivity_merged.csv
*sleepDay_merged.csv
*weightLogInfo_merged.csv
```{r}
activity <- read.csv("dailyActivity_merged.csv")
sleep <- read.csv("sleepDay_merged.csv")
weight <- read.csv("weightLogInfo_merged.csv")
```

I already checked the data in Google Sheets. I just need to make sure that everything was imported correctly by using head() function. The head() function in R Language is used to get the first parts of a vector, matrix, table, data frame or function.
```{r, attr.output='style="max-height: 100px;"'}
head(sleep)
head(activity)
head(weight)
```

The format of the timestamp data does not match in all datasets. Before analysis, I need to convert it to date time format and split to date and time.

# Fixing formatting
```{r}
# activity
activity$ActivityDate=as.POSIXct(activity$ActivityDate, format="%m/%d/%Y", tz=Sys.timezone())
activity$date <- format(activity$ActivityDate, format = "%m/%d/%y")
# sleep
sleep$SleepDay=as.POSIXct(sleep$SleepDay, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
sleep$date <- format(sleep$SleepDay, format = "%m/%d/%y")
# weight
weight$Date=as.POSIXct(weight$Date, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
weight$date <- format(weight$Date, format = "%m/%d/%y")
```

Now that everything is ready, I can begin exploring datasets.

# Exploring and summarizing data
The n_distinct() and nrow() functions are used to determine the number of unique values and the number of rows in a data frame, respectively.
```{r, attr.output='style="max-height: 100px;"'}
n_distinct(activity$Id)
n_distinct(sleep$Id)
n_distinct(weight$Id)
```

This information tells us about number participants in each data sets.

There is 33 participants in the activity data set, 24 in the sleep and only 8 in the weight data set. 8 participants is not significant to make any recommendations and conclusions based on this data.

The heart rate and weight log data frames contain a very low number of participants based on the n_distinct() outputs. Thus, reliable recommendations and conclusions cannot be made solely from these data frames.

#  Data Cleaning
The **clean_names()** function makes sure that the column names are unique and consistent. This ensures that there’s only characters, numbers, and underscores in the names.
```{r, attr.output='style="max-height: 100px;"'}
clean_names(activity)
clean_names(sleep)
clean_names(weight)
 
```

Next I use the **is.null()** function to check for any null values in every dataset.
```{r}
is.null(activity)
is.null(sleep)
is.null(weight)
```

Next, I will check to see how many rows there are and how many duplicate rows in each dataframe.
```{r}
nrow(activity)
nrow(sleep)
nrow(weight)
nrow(activity[duplicated(activity),])
nrow(sleep[duplicated(sleep),])
nrow(weight[duplicated(weight),])
```

We can see that 3 duplicate rows were found in the sleep datasets and will have to be removed.
```{r}
sleep <- unique(sleep)
```

Let’s have a look at summary statistics of the data sets

The **summary()** function is used to pull key statistics about the data frames
```{r}
# activity
activity %>%  
  select(TotalSteps,
         TotalDistance,
         SedentaryMinutes,
         Calories) %>%
  summary()

# active minutes per category
activity %>%
  select(VeryActiveMinutes,
         FairlyActiveMinutes,
         LightlyActiveMinutes) %>%
  summary()

# sleep
sleep %>%
  select(TotalSleepRecords,
         TotalMinutesAsleep,
         TotalTimeInBed) %>%
  summary()

# weight
weight %>%
  select(WeightKg,
         BMI) %>%
  summary()
```

## Some interesting discoveries from this summary:
*The average user is taking 7638 steps a day, missing the recommended 10,000 steps for health benefits according to the CDC. 

*Studies show the average person in the population burns 1800 calories a day. Fitbit users in this case are burning an average of 2304 calories, so the typical Fitbit user burns an additional 500 calories a day or 1 lb(3500 calories) a week.

*On average, users are getting 21.16 very active minutes a day, this equates to 148.12 minutes a week. The CDC recommends 75 minutes of vigorous activity a week, so the typical Fitbit user is doing well in this area and achieving additional health benefits.

*The average user sleeps once per day for 419.5 minutes, or roughly 7 hours. This falls within the CDC’s recommendations for adults in order to get the proper amount of rest.

# Merging data
Before beginning to visualize the data, I need to merge two data sets. I’m going to merge activity and sleep on columns Id and date.
```{r, attr.output='style="max-height: 100px;"'}
merged_data <- merge(sleep, activity, by=c('Id', 'date'))
head(merged_data)
```

# Visualization
```{r}
ggplot(data=activity, aes(x=TotalSteps, y=Calories)) + 
  geom_point(color="salmon") +
  geom_smooth() +
  labs(title = "Calories Burned vs Total Steps",x="Total Steps", y="Calories Burned")
```
* There is a positive correlation between Total Steps and Calories Burned, that means the more steps taken the more calories are burned.

```{r}
ggplot(data=sleep, aes(x=TotalMinutesAsleep, y=TotalTimeInBed)) +
  geom_point(color="salmon") +
  geom_smooth() +
  labs(title="Total Minutes Asleep vs. Total Time in Bed",x="Total Minutes Asleep", y="Total Time in Bed")
```
* The relationship between Total Minutes Asleep and Total Time in Bed looks linear.

* Some of these data points spent a lot of time in bed, but didn’t actually sleep, and then a small batch that slept a whole bunch and spent more time in bed.

```{r}
ggplot(data=merged_data, aes(x=TotalMinutesAsleep, y=SedentaryMinutes)) + 
  geom_point(color='salmon') +
  geom_smooth() +
  labs(title="Total Minutes Asleep vs. Sedentary Minutes", x="Total Minutes Asleep", y="Sedentary Minutes")


```
* Here we can see the negative relationship between Sedentary Minutes and Sleep time. If Bellabeat users want to improve their sleep, Bellabeat app can recommend reducing sedentary time.

# Recommendations for the business
**After analyzing FitBit Fitness Tracker Data, I found some insights that would help influence Bellabeat marketing strategy.**

*Based on the amount of steps taken and amount of calories burned, users appear to burn more calories with more steps. Average total steps per day are 7638 which is lower than the recommended amount of steps to receive health benefits according to the CDC research. They found that taking 8,000 steps per day was associated with a 51% lower risk for all-cause mortality (or death from all causes). Taking 12,000 steps per day was associated with a 65% lower risk compared with taking 4,000 steps. Bellabeat can encourage people to take at least 8 000 explaining the benefits for their health. Therefore, Bellabeat should encourage users to take more steps throughout the day. They could also offer app incentives, such as give users app credits for every 1000 steps, which can then be used to redeem prizes or vouchers.


*Bellabeat could incorporate a Sleep Score rating system that gives you a score based on the amount of time you were in bed vs the time you were asleep and Enable notifications in the morning to encourage activity if a user has spent an hour in bed awake.


*Average sedentary time for all Fitbit users was found to be 717 minutes, just under 12 hours. Additionally, average time asleep for these users was 419 minutes, just under 7 hours. According to the CDC, over 7 hours of sleep is recommended for the general adult population and contributes to a healthy life style. Bellabeat could incorporate reminders through an app that notifies users of the best time to go to sleep and wake up in order to feel refreshed in the morning and get adequate amount of sleep. The app could also automatically turn on ‘do not disturb’ mode and turn on ‘night mode’ on the customers’ phones to signal 

**Thank you for reading, comments and feedback are always welcome!**
